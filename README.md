# github.com/jylitalo/rotakey

## Overview
Package rotakey helps you rotate AWS keys
Currently supports awscli default configuration.

to build

`go build -o rotakey main/main.go`

Imports: 14

## Index
- [type AwsConfig](#type-awsconfig)
    - [func (cf *AwsConfig) AccessKeyID(ctx context.Context) (string, error)](#func-cf-awsconfig-accesskeyid)
    - [func (cf *AwsConfig) LoadDefaultConfig(ctx context.Context) error](#func-cf-awsconfig-loaddefaultconfig)
    - [func (cf *AwsConfig) NewIam() awstypes.AwsIam](#func-cf-awsconfig-newiam)
- [type DotAws](#type-dotaws)
    - [func (da DotAws) GetProfile(accessKeyId string) (*ini.Section, error)](#func-da-dotaws-getprofile)
    - [func (da DotAws) Load() error](#func-da-dotaws-load)
    - [func (da DotAws) Save(profile *ini.Section, accessKey iamtypes.AccessKey) error](#func-da-dotaws-save)
- [type Rotate](#type-rotate)
    - [func (client Rotate) Execute(awsCfg types.AwsConfig, fileCfg types.DotAws) error](#func-client-rotate-execute)

## Examples

This section is empty.

## Constants

This section is empty.

## Variables
This section is empty.
## Types
### type [AwsConfig](./aws.go#L13)

<pre>
type AwsConfig struct {}
</pre>
### func (cf *AwsConfig) [AccessKeyID](./aws.go#L17)
<pre>
func (cf *AwsConfig) AccessKeyID(ctx <a href="https://pkg.go.dev/context#Context">context.Context</a>) (string, error)
</pre>
### func (cf *AwsConfig) [LoadDefaultConfig](./aws.go#L22)
<pre>
func (cf *AwsConfig) LoadDefaultConfig(ctx <a href="https://pkg.go.dev/context#Context">context.Context</a>) error
</pre>
### func (cf *AwsConfig) [NewIam](./aws.go#L31)
<pre>
func (cf *AwsConfig) NewIam() <a href="types/README.md#type-awsiam">awstypes.AwsIam</a>
</pre>
### type [DotAws](./dotaws.go#L14)

<pre>
type DotAws struct {}
</pre>
### func (da DotAws) [GetProfile](./dotaws.go#L53)
<pre>
func (da DotAws) GetProfile(accessKeyId string) (<a href="https://pkg.go.dev/gopkg.in/ini.v1#Section">*ini.Section</a>, error)
</pre>
### func (da DotAws) [Load](./dotaws.go#L37)
<pre>
func (da DotAws) Load() error
</pre>
### func (da DotAws) [Save](./dotaws.go#L70)
<pre>
func (da DotAws) Save(profile <a href="https://pkg.go.dev/gopkg.in/ini.v1#Section">*ini.Section</a>, accessKey <a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/service/iam/types#AccessKey">iamtypes.AccessKey</a>) error
</pre>
### type [Rotate](./rotate.go#L16)

<pre>
type Rotate struct {}
</pre>
### func (client Rotate) [Execute](./rotate.go#L49)
<pre>
func (client Rotate) Execute(awsCfg <a href="types/README.md#type-awsconfig">types.AwsConfig</a>, fileCfg <a href="types/README.md#type-dotaws">types.DotAws</a>) error
</pre>
Execute rotates user's AWS credentials in ~/.aws/credentials
Possible error messages are:
- %s does not exist
- failed to check %s
- failed to create access key due to %v
- failed to delete access key due to %v
- failed to save %s due to %v
- no profile with %s access key id
- unable to find AWS profile due to AWS_SESSION_TOKEN
- InvalidClientTokenId at CreateAccessKey: The security token (%s) included in the request is invalid
- InvalidClientTokenId at DeleteAccessKey: The security token (%s) included in the request is invalid
- LimitExceeded: Cannot exceed quota for AccessKeysPerUser: %d


--

Generated by [github.com/jylitalo/go2md](https://github.com/jylitalo/go2md/) v0.4.1

